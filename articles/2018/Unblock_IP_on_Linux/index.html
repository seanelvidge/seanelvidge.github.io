<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="google-site-verification=J9rWPlgXVze59vdeyO_ELilvCiXVpNNXzZok9k6IupM"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Unblock IP address from connecting via SSH | Sean Elvidge </title> <meta name="author" content="Sean Elvidge"> <meta name="description" content=""> <meta name="keywords" content="sean elvidge, serene, space environment, serene, space weather, mathematics, football, statistics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%98%80%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://seanelvidge.github.io/articles/2018/Unblock_IP_on_Linux/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Sean Elvidge </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"> </a> </li> <li class="nav-item "> <a class="nav-link" href="/index.html">articles </a> </li> <li class="nav-item "> <a class="nav-link" href="/about/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/tools/">tools </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/outreach/">outreach </a> </li> <li class="nav-item "> <a class="nav-link" href="/search/"> search </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Unblock IP address from connecting via SSH</h1> <p class="post-meta"> March 08, 2018 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2018   ·   <i class="fa-solid fa-hashtag fa-sm"></i> misc   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>I manage a small cluster at work and occasionally students get their IP address banned by entering the wrong password when logging into the cluster. I don’t fix the problem often enough to remember how to do it, so I thought I’d jot it down here for future reference.</p> <p>The blocking of IPs is controlled by <a href="https://www.fail2ban.org/wiki/index.php/Main_Page" target="\_blank" rel="external nofollow noopener">Fail2ban</a>, which scans log files for IPs which look malicious (e.g. too many password failures, looking for exploits, etc.) and bans them. It does this by updating firewall rules to reject the specific IP.</p> <p>To see the list of what is being blocked run (in a terminal):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>iptables <span class="nt">-L</span> <span class="nt">--line-numbers</span>
</code></pre></div></div> <p>That will give you something like:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Chain INPUT <span class="o">(</span>policy ACCEPT<span class="o">)</span>
num  target     prot opt <span class="nb">source               </span>destination
1    ACCEPT     udp  <span class="nt">--</span>  anywhere             anywhere             udp xxx:xxxxxx
2    ACCEPT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp xxx:xxxxxx
3    ACCEPT     udp  <span class="nt">--</span>  anywhere             anywhere             udp xxx:xxxxxx
4    ACCEPT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp xxx:xxxxxx
5    f2b-sshd   tcp  <span class="nt">--</span>  anywhere             anywhere             multiport dports ssh
6    REJECT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp spts:xxxxxx:xxxxxx dpt:ulistproc reject-with icmp-port-unreachable
7    REJECT     udp  <span class="nt">--</span>  anywhere             anywhere             udp spts:xxxxxx:xxxxxx dpt:ulistproc reject-with icmp-port-unreachable
8    ACCEPT     all  <span class="nt">--</span>  anywhere             anywhere
9    ACCEPT     all  <span class="nt">--</span>  anywhere             anywhere
10   ACCEPT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp xxx:xxxxxx state NEW
11   ACCEPT     all  <span class="nt">--</span>  anywhere             anywhere             state RELATED,ESTABLISHED
12   ACCEPT     tcp  <span class="nt">--</span>  xxx.xxx.xxx.xxx/24   anywhere             tcp xxx:xxxxxx state NEW
13   ACCEPT     tcp  <span class="nt">--</span>  xxx.xxx.xxx.xxx/24   anywhere             tcp xxx:xxxxxx state NEW
14   REJECT     udp  <span class="nt">--</span>  anywhere             anywhere             udp xxx:xxxxxx reject-with icmp-port-unreachable
15   REJECT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp xxx:xxxxxx reject-with icmp-port-unreachable
16   REJECT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp xxx:xxxxxx reject-with icmp-port-unreachable
17   REJECT     tcp  <span class="nt">--</span>  anywhere             anywhere             tcp xxx:xxxxxx:0:1023 reject-with icmp-port-unreachable
18   REJECT     udp  <span class="nt">--</span>  anywhere             anywhere             udp xxx:xxxxxx:0:1023 reject-with icmp-port-unreachable

Chain FORWARD <span class="o">(</span>policy DROP<span class="o">)</span>
num  target     prot opt <span class="nb">source               </span>destination
1    ACCEPT     all  <span class="nt">--</span>  anywhere             xxx.xxx.xxx.xxx/24     ctstate RELATED,ESTABLISHED
2    ACCEPT     all  <span class="nt">--</span>  xxx.xxx.xxx.xxx/24   anywhere
3    ACCEPT     all  <span class="nt">--</span>  anywhere             anywhere
4    REJECT     all  <span class="nt">--</span>  anywhere             anywhere             reject-with icmp-port-unreachable
5    REJECT     all  <span class="nt">--</span>  anywhere             anywhere             reject-with icmp-port-unreachable
6    ACCEPT     all  <span class="nt">--</span>  anywhere             anywhere             state RELATED,ESTABLISHED
7    ACCEPT     all  <span class="nt">--</span>  anywhere             anywhere

Chain OUTPUT <span class="o">(</span>policy ACCEPT<span class="o">)</span>
num  target     prot opt <span class="nb">source               </span>destination
1    ACCEPT     udp  <span class="nt">--</span>  anywhere             anywhere             udp dpt:bootpc

Chain f2b-sshd <span class="o">(</span>1 references<span class="o">)</span>
num  target     prot opt <span class="nb">source               </span>destination
1    REJECT     all  <span class="nt">--</span>  xxx.xxx.xxx.xxx      anywhere             reject-with icmp-port-unreachable
2    REJECT     all  <span class="nt">--</span>  199.188.177.166      anywhere             reject-with icmp-port-unreachable
3    RETURN     all  <span class="nt">--</span>  anywhere             anywhere
</code></pre></div></div> <p>What we are interested in is the ‘Chain f2b-sshd’ part at the bottom of the list. Here we can see the (made up) IP address 199.188.177.166 is being banned (“REJECT”). That means that any user trying to SSH into the machine from that IP address will fail. If you have verified that that is the IP address you are expecting and know it is safe to unblock then we can delete the rule using the Chain name (f2b-sshd) and line number (2) using “iptables -D CHAIN LINE_NUMBER” so in this specific case:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>iptables <span class="nt">-D</span> f2b-sshd 2
</code></pre></div></div> <p>To make the change permanent you must save your changes:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>iptables-save
</code></pre></div></div> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/articles/2025/Taylor-Swifts-Mood/">The Trend in Taylor Swift's Mood</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/articles/2025/Pour_over_brewing_recipe_generator/">Pour Over Brewing Recipe Generator</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/articles/2025/Home_advantage_in_English_football/">Waning Home Advantage in English League Football</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/articles/2025/Brewing_coffee_at_altitude/">Brewing the Perfect Coffee at Altitude</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/articles/2024/All_England_football_league_results/">All England football league results</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Sean Elvidge. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script type="text/javascript">$(function(){$('[data-toggle="tooltip"]').tooltip()});</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?5d75c11f89cd96294bf5e6dd1ee1bb30"></script> <script defer src="/assets/js/common.js?fcfacfb8c6281f5e68d5a7d348186eb1"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-P1SXF6NWN8"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-P1SXF6NWN8");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>