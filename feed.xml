<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://seanelvidge.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://seanelvidge.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-11-24T21:21:14+00:00</updated><id>https://seanelvidge.github.io/feed.xml</id><title type="html">Sean Elvidge</title><entry><title type="html">Levelling the Playing Field, Adjusting Goal Records in International Football</title><link href="https://seanelvidge.github.io/blog/2024/Adjusted_England_Goals/" rel="alternate" type="text/html" title="Levelling the Playing Field, Adjusting Goal Records in International Football"/><published>2024-11-20T17:13:00+00:00</published><updated>2024-11-20T17:13:00+00:00</updated><id>https://seanelvidge.github.io/blog/2024/Adjusted_England_Goals</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2024/Adjusted_England_Goals/"><![CDATA[<p>In recent years, we’ve witnessed a surge in international football records being shattered. Modern players are scoring at unprecedented rates, and while this is undoubtedly exciting for fans, it raises an important question: Are today’s goal-scoring feats truly comparable to those of past legends?</p> <p>The landscape of international football has evolved significantly. The expansion of FIFA membership has introduced many new, smaller nations into the competitive arena. This influx has led to more matches where traditional football powerhouses face off against developing teams, often resulting in lopsided scorelines. Consequently, contemporary players have more opportunities to inflate their goal tallies against weaker opposition.</p> <p>This shift poses a challenge when attempting to compare the goal-scoring records of current players with those from previous eras. The legends of the past often played fewer matches against a more consistent level of competition, making their goal tallies a reflection of performances against relatively equal opponents.</p> <p>So, how can we level the playing field and make fair comparisons across different football eras?</p> <h2 id="introducing-a-weighted-goal-system">Introducing a Weighted Goal System</h2> <p>To address this disparity, I embarked on a project to adjust goal records by accounting for the relative strength of the opposition. The idea is to assign a weighting to each goal based on the difficulty of scoring against a particular team at the time of the match. This method aims to provide a more nuanced evaluation of a player’s goal-scoring achievements.</p> <h3 id="utilizing-elo-ratings">Utilizing ELO Ratings</h3> <p>The foundation of this approach lies in the ELO rating system, a method originally devised for ranking chess players but now widely adopted across various sports, including football. ELO ratings provide a dynamic measure of a team’s strength, updating after each match based on the result and the quality of the opposition.</p> <p>By leveraging historical ELO ratings, we can assess the relative strength of any two teams at the time they played. This allows us to calculate a weighting factor for each goal scored, reflecting the challenge posed by the opponent.</p> <h3 id="the-weighting-formula">The Weighting Formula</h3> <p>The weighting for each goal is determined using the following formula:</p> \[\text{Weight} = 1 - k\times\frac{E-O}{E}\] <p>Where, \(E\) is the ELO rating of England before the match, \(O\) is the ELO rating of the opposition before the match and \(k\) a scaling constant that adjusts the sensitivity of the weighting to the difference in ELO ratings.</p> <p>This formula adjusts the weight of a goal based on how much stronger or weaker the opposition is relative to England:</p> <ul> <li>If England faces a stronger team (\(O &gt; E\)), the weighting increases above 1, acknowledging the greater difficulty.</li> <li>If England faces a weaker team (\(O &lt; E\)), the weighting decreases below 1, reflecting the relatively easier challenge.</li> <li>The constant \(k\) controls how much the difference in ratings affects the weighting.</li> </ul> <h3 id="interpreting-the-weighting">Interpreting the Weighting</h3> <p>Adjusting the \(k\) value alters the impact of the opposition’s strength:</p> <ul> <li>A higher \(k\) value (e.g., 2) amplifies the effect, giving more weight to goals against stronger teams and less to those against weaker ones.</li> <li>A lower \(k\) value (e.g., 1) minimizes the effect, resulting in a more uniform weighting across different opponents.</li> </ul> <p>By experimenting with different \(k\) values, we can fine-tune the system to balance fairness and sensitivity, ensuring that exceptional performances against top-tier teams are appropriately recognized while maintaining a reasonable value for consistent scoring against all opponents.</p> <p>For the rest of this post we use a value of \(k=2\).</p> <h3 id="results">Results</h3> <p>When I last wrote a post similar to this, Wayne Rooney had just <a href="https://seanelvidge.github.io/blog/2015/Rooney-50/">broke the England National team goal record with 50 goals</a>. Since then Kane has broke this record again (at the time of writing) with 69 goals. Using the above approach the updated top 10 of England goal scorers are (the “Ranking” is based on the weighted goals column):</p> <style>table{border-collapse:collapse;width:50%;margin:20px auto}th,td{border:1px solid black;padding:8px;text-align:left}th{cursor:pointer;background-color:#f4f4f4}</style> <table id="footballTable"> <thead> <tr> <th onclick="sortTable(0)">Ranking</th> <th onclick="sortTable(1)">Name</th> <th onclick="sortTable(2)">Goals</th> <th onclick="sortTable(3)">Weighted Goals</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>Harry Kane</td> <td>69</td> <td>45</td> </tr> <tr> <td>2</td> <td>Gary Lineker</td> <td>48</td> <td>37</td> </tr> <tr> <td>3</td> <td>Bobby Charlton</td> <td>49</td> <td>36</td> </tr> <tr> <td>4</td> <td>Jimmy Greaves</td> <td>44</td> <td>35</td> </tr> <tr> <td>5</td> <td>Wayne Rooney</td> <td>53</td> <td>34</td> </tr> <tr> <td>6</td> <td>Michael Owen</td> <td>40</td> <td>30</td> </tr> <tr> <td>7</td> <td>Alan Shearer</td> <td>30</td> <td>23</td> </tr> <tr> <td>8</td> <td>Tom Finney</td> <td>30</td> <td>23</td> </tr> <tr> <td>9</td> <td>Nat Lofthouse</td> <td>30</td> <td>22</td> </tr> <tr> <td>10</td> <td>Frank Lampard</td> <td>29</td> <td>21</td> </tr> </tbody> </table> <script>function sortTable(e){const t=document.getElementById("footballTable"),r=Array.from(t.rows).slice(1),s=!isNaN(r[0].cells[e].innerText);let l=r.sort((t,r)=>{return(s?+t.cells[e].innerText:t.cells[e].innerText.toLowerCase())>(s?+r.cells[e].innerText:r.cells[e].innerText.toLowerCase())?1:-1});const n="asc"===t.dataset.sortOrder?"desc":"asc";"desc"===n&&l.reverse(),t.dataset.sortOrder=n,l.forEach(e=>t.tBodies[0].appendChild(e))}</script> <p>You can see that whilst Kane is still number 1 - his number of goals are significantly less. (Note that the adjusted number of goals here have been rounded to the nearest goal for ease of reading).</p> <p>As may be expected Kane has the biggest change between actual goals scored (69) and the weighted number of goals (45) with a difference of 24, perphaps reaffirming the theory that modern day players are scoring a significant amount of their goals against weaker opposition than in the past. Gary Lineker moves from 4th in the all time list to 2nd.</p> <p>At the other end of the table we end up with a number of people (41) who (because of the rounding as well) move from having scored at least 1 for England to being on 0 goals, but only four who go from more than 1 to zero:</p> <table style="border-collapse: collapse; width: 50%;"> <thead> <tr> <th style="border: 1px solid black; padding: 8px;">Name</th> <th style="border: 1px solid black; padding: 8px;">Goals</th> <th style="border: 1px solid black; padding: 8px;">Weighted Goals</th> </tr> </thead> <tbody> <tr> <td style="border: 1px solid black; padding: 8px;">Tammy Abraham</td> <td style="border: 1px solid black; padding: 8px;">3</td> <td style="border: 1px solid black; padding: 8px;">0</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Paul Ince</td> <td style="border: 1px solid black; padding: 8px;">2</td> <td style="border: 1px solid black; padding: 8px;">0</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Tyrone Mings</td> <td style="border: 1px solid black; padding: 8px;">2</td> <td style="border: 1px solid black; padding: 8px;">0</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">James Ward-Prowse</td> <td style="border: 1px solid black; padding: 8px;">2</td> <td style="border: 1px solid black; padding: 8px;">0</td> </tr> </tbody> </table> <p>Unfortuntaely Tammy Abraham’s 3 goals for England were scored against very much weaker opposition in the form of Montenegro (England won 7-0 on 14/11/19), Andorra (England won 0-5 on 09/10/21) and San Marino (England won 0-10 on 15/11/21).</p> <p>If you want to have a look at the data you can access it all <a href="https://seanelvidge.github.io/assets/files/england_elo_goal_data.csv">here</a>) (which also includes the “Adjusted Total” which weights Friendlies as 0.5 and “finals” as 2x (as per the description <a href="https://seanelvidge.github.io/blog/2015/Rooney-50/">here</a>.</p>]]></content><author><name></name></author><category term="mathematics"/><category term="football"/><summary type="html"><![CDATA[By weighting international goals by strength of the opposition we can compare goal scoring prowess across the decades.]]></summary></entry><entry><title type="html">As-many-days-together-as-not Calculator</title><link href="https://seanelvidge.github.io/blog/2022/As_many_days_together_as_not/" rel="alternate" type="text/html" title="As-many-days-together-as-not Calculator"/><published>2022-01-25T10:09:00+00:00</published><updated>2022-01-25T10:09:00+00:00</updated><id>https://seanelvidge.github.io/blog/2022/As_many_days_together_as_not</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2022/As_many_days_together_as_not/"><![CDATA[<html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <title>Milestone Date Calculator</title> <style>body{font-family:Arial,sans-serif;max-width:600px;margin:0 auto;padding:20px}label{display:block;margin-top:10px}input{margin-top:5px;padding:5px;width:100%}button{margin-top:15px;padding:10px 15px;background-color:#007bff;color:white;border:0;cursor:pointer}button:hover{background-color:#0056b3}.result{margin-top:20px;font-weight:bold}</style> </head> <body> <p>Enter your date of birth and the date you started dating your significant other to find out the date when you'll have been with them longer than not with them.</p> <form id="calculatorForm"> <label for="dob">Date of Birth:</label> <input type="date" id="dob" required=""/> <label for="startDate">Date You Started Dating:</label> <input type="date" id="startDate" required=""/> <button type="button" onclick="calculateMilestone()">Calculate</button> </form> <div class="result" id="result"></div> <script>function calculateMilestone(){const e=new Date(document.getElementById("dob").value),t=new Date(document.getElementById("startDate").value);if(isNaN(e)||isNaN(t))return void(document.getElementById("result").textContent="Please enter valid dates.");const n=t-e,a=new Date(t.getTime()+n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});document.getElementById("result").textContent=`You will have been with your partner longer than not on: ${a}`}</script> </body> </html>]]></content><author><name></name></author><category term="misc"/><summary type="html"><![CDATA[Calculate the date when you have been with your significant other longer than you have not!]]></summary></entry><entry><title type="html">Euro 2020 – The Final Modelling Results</title><link href="https://seanelvidge.github.io/blog/2021/Euro_2020_Final_Modelling_Results/" rel="alternate" type="text/html" title="Euro 2020 – The Final Modelling Results"/><published>2021-07-14T11:18:00+00:00</published><updated>2021-07-14T11:18:00+00:00</updated><id>https://seanelvidge.github.io/blog/2021/Euro_2020_Final_Modelling_Results</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2021/Euro_2020_Final_Modelling_Results/"><![CDATA[<p>With a disappointing end to the tournament (for us England fans anyway!) here is the final conclusions of how the model performed.</p> <p>Unfortunately a mixture of work commitments, and games coming thick and fast, I was unable to keep this website up-to-date with my predictions for each fixture, but I did carry on doing them offline.</p> <p>(As a reminder: the model description is <a href="https://seanelvidge.github.io/blog/2021/Euro_2020_Predictions/" target="\_blank">here</a> and the other models we compare against are <a href="">here</a>.)</p> <p>The Round of 16 gave us some truly surprising results, with every single model (including the bookies!) doing (a lot) worse than our Lazy prediction of 33% for Home, Draw and Away. This then seemed to be a sign of what was to come, the semifinal and final was worse than Lazy for most of the tested models. It made for an exciting tournament but a disaster for predictions!</p> <p>The final performance analysis of the models was:</p> <table style="border-collapse: collapse; width: 50%;"> <thead> <tr> <th style="border: 1px solid black; padding: 8px;">Model</th> <th style="border: 1px solid black; padding: 8px;">Brier Score</th> </tr> </thead> <tbody> <tr> <td style="border: 1px solid black; padding: 8px;">HAL 9000</td> <td style="border: 1px solid black; padding: 8px;">0.586</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Bookies</td> <td style="border: 1px solid black; padding: 8px;">0.588</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Average</td> <td style="border: 1px solid black; padding: 8px;">0.609</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">BDC</td> <td style="border: 1px solid black; padding: 8px;">0.655</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Lazy</td> <td style="border: 1px solid black; padding: 8px;">0.667</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">SSC</td> <td style="border: 1px solid black; padding: 8px;">0.728</td> </tr> </tbody> </table> <p>Immediate things to note are that HAL won (just)! Clearly that is a great result. It is interesting though that SSC (small “smart” crowd) ended up doing much worse than Lazy, which is terrible! I would have expected that to do much better.</p> <p>The poor performance likely comes from the fact that there were a number of “perfect” wrong answers. By that I mean that the model (my friends) all predicted something would definitely happen (e.g. England to beat Denmark after 90 minutes). That gave it a probability of 100%, when it didn’t happen, the maximum penalty of 2.0 was assigned.</p> <p>Nothing in football is ever going to be 100% certain (the most one sided result that the bookies predicted was a Germany win against Hungary in the group stage [80.7%] – it ended up as a draw!). If we set a rule that SSC can never predict more than an 80% result then the Brier Score drops to 0.627 and ends up beating BDC and Lazy – more like I would have expected! Making SSC’s maximum prediction 60% further drops the Brier Score to 0.577 – making it the winning model! However this is likely because there was a large number of surprising results in the tournament, so this is really only a post-tournament model, and not a fair assessment. Setting the maximum to 80% (matching the Bookies maximum value) seems like a fair compromise though!</p> <table style="border-collapse: collapse; width: 50%;"> <thead> <tr> <th style="border: 1px solid black; padding: 8px;">Model</th> <th style="border: 1px solid black; padding: 8px;">Brier Score</th> </tr> </thead> <tbody> <tr> <td style="border: 1px solid black; padding: 8px;">HAL 9000</td> <td style="border: 1px solid black; padding: 8px;">0.586</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Bookies</td> <td style="border: 1px solid black; padding: 8px;">0.588</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Average</td> <td style="border: 1px solid black; padding: 8px;">0.609</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">SSC</td> <td style="border: 1px solid black; padding: 8px;">0.627</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">BDC</td> <td style="border: 1px solid black; padding: 8px;">0.655</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Lazy</td> <td style="border: 1px solid black; padding: 8px;">0.667</td> </tr> </tbody> </table> <p>Overall, a great result for HAL. Also, overall, the model came 3rd in Futbolmetrix’s <a href="https://futbolmetrix.wordpress.com/2021/07/12/euro2020-sophcon-final-results/" target="\_blank">Sophisticated Prediction Contest</a> which I am very happy with. The results post has some interesting statistical analysis and definitely worth checking out.</p>]]></content><author><name></name></author><category term="mathematics"/><category term="football"/><summary type="html"><![CDATA[Final analysis of how our Euro 2020 model performed.]]></summary></entry><entry><title type="html">Euro 2020 – Round 1 Results &amp;amp; Validation Methodology</title><link href="https://seanelvidge.github.io/blog/2021/Euro_2020_Round_1_Results_and_Validation/" rel="alternate" type="text/html" title="Euro 2020 – Round 1 Results &amp;amp; Validation Methodology"/><published>2021-06-15T23:14:00+00:00</published><updated>2021-06-15T23:14:00+00:00</updated><id>https://seanelvidge.github.io/blog/2021/Euro_2020_Round_1_Results_and_Validation</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2021/Euro_2020_Round_1_Results_and_Validation/"><![CDATA[<p>With the first round of fixtures complete we can have a first peak of how well our model is doing (for the details about my Euro’s prediction model see my <a href="https://seanelvidge.github.io/blog/2021/Euro_2020_Predictions/" target="\_BLANK">previous post</a>.)</p> <p>A hugely important thing for any model is validation. How well is our model doing? One way to investigate this is by looking at the <a href="https://en.wikipedia.org/wiki/Brier_score" target="\_BLANK">Brier Score</a> of the model. The Brier score is used to measure the accuracy of probabilistic predictions. Fundamentally it is the mean square error of the forecast and varies from 0 (perfect prediction) to 2. So the lower the score the better. For each result a Brier score is calculated and then an overall score is given to the models by taking the mean value.</p> <p>As a baseline, a simple prediction of 33% for each result (win/draw/loss) gives you a Brier score of 0.666. So we should always be looking to do better than that. Likely the best model of this tournament will be that of the bookies (it usually is!). Our version of the bookies model will be to take the average of a range of bookies (rather than taking any one organisation) which can be found on <a href="http://www.oddsportal.com/" target="\_BLANK">oddsportal.com</a>, these are then converted to a probability.</p> <p>Two final models for comparison come from ‘crowd wisdom’. Firstly from <a href="http://www.sofascore.com/" target="\_BLANK">SofaScore</a>, where people can vote on a particular result (typically over 170,000 people vote on these results). Very little thought is needed, you simply press a button about what result you think is most likely, and this is a “secondary” reason for using the app (it is for finding out sports scores). An alternative crowd model comes from a smaller, “smarter”, crowd.</p> <p>For the Premier League, FA Cup, World Cup and Euro’s my friends and I take part in a prediction competition, we predict the result of every fixture (with a suitably complicated scoring system based on the correct result, goals a team score and goal difference). Looking at these 10 peoples predictions we can assign probabilities based on the results they projected (e.g.if 7 people think “Team A” will win, then we assign a 70% probability).</p> <p>So that rounds off the models we are going to compare:</p> <ul> <li>HAL 9000 (that is the name of my model)</li> <li>Bookies</li> <li>BDC (Big Dumb Crowd)</li> <li>SSC (Small Smart Crowd)</li> <li>Lazy (all results 33%)</li> </ul> <table style="border-collapse: collapse; width: 50%;"> <thead> <tr> <th style="border: 1px solid black; padding: 8px;">Model</th> <th style="border: 1px solid black; padding: 8px;">Brier Score</th> </tr> </thead> <tbody> <tr> <td style="border: 1px solid black; padding: 8px;">HAL 9000</td> <td style="border: 1px solid black; padding: 8px;">0.522</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">SSC</td> <td style="border: 1px solid black; padding: 8px;">0.547</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Bookies</td> <td style="border: 1px solid black; padding: 8px;">0.575</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">BDC</td> <td style="border: 1px solid black; padding: 8px;">0.663</td> </tr> <tr> <td style="border: 1px solid black; padding: 8px;">Lazy</td> <td style="border: 1px solid black; padding: 8px;">0.667</td> </tr> </tbody> </table> <p>Currently HAL is winning with a Brier score of 0.522 and the SSC is also beating the bookies (but we’ve only played 12 of 51 matches so plenty of time for that to change!). At least we can have some confidence in our model.</p>]]></content><author><name></name></author><category term="mathematics"/><category term="football"/><summary type="html"><![CDATA[Description of the methodology for validating my Euro 2020 football model]]></summary></entry><entry><title type="html">Euro 2020 Predictions</title><link href="https://seanelvidge.github.io/blog/2021/Euro_2020_Predictions/" rel="alternate" type="text/html" title="Euro 2020 Predictions"/><published>2021-06-07T15:09:00+00:00</published><updated>2021-06-07T15:09:00+00:00</updated><id>https://seanelvidge.github.io/blog/2021/Euro_2020_Predictions</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2021/Euro_2020_Predictions/"><![CDATA[<p>For the 2018 World Cup I created a prediction model for the tournament (you can read the <a href="https://seanelvidge.github.io/blog/2018/World_Cup_2018_Predictions/" target="\_blank">details here</a>. Overall the model did well and I was pretty happy with it.</p> <p>For this tournament, Euro <del>2020</del> <del>2021</del> 2020 (it took me a while to realize that this tournament is called Euro 2020) I have built a new model which is much more simple than my World Cup variant.</p> <p>There are a few reasons for this decision, primarily based around the fact that this particular tournament is not going to be hosted in one country (as it is usually), but instead will be played over 11 countries. Whilst this could be accounted for in the modelling (as many other people have done) I am not sure exactly how this home advantage will pan out – because the change of format is something which we just have no data on. Not to mention that this year, for the first time, there was a higher % of away wins (40) than home wins (38) [obviously this past year almost every game has been played behind closed doors].</p> <p>So my model for this tournament first requires a rating for each team. This is similar to the <a href="https://www.eloratings.net/" target="\_blank">World Football Elo ratings (WFER)</a> but with some changes I have made (I am currently writing up the exact details). It then takes every World Cup and European Championship fixture, excludes the home team (since I do not want that impact in my model) and then looks at the “home” team rating and “away” team rating (these are now meaningless terms) and what the result was.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/euro2020/hda_3-480.webp 480w,/assets/img/euro2020/hda_3-800.webp 800w,/assets/img/euro2020/hda_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/euro2020/hda_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption style="text-align: center; margin-top: 8px;">Scatter plot of ‘[H]ome win’, ‘[D]raw’ and ‘[A]way win’ by team rating.</figcaption> </figure> </div> </div> <p>Whilst this plot is obviously quite messy, overall we can see some rough trends. These highlight an immediate problem. Given that I thought I had removed home advantage we should expect that the black line would be exactly on the line y=x. That is, if two teams are equally rated you would expect this is more likely to result in a draw. However you can see from the figure that this is not true. Although the red, ‘away win’ and blue ‘home win’ regressions do confirm what we would expect – e.g. if the home team has a higher rating than the away team then it is more likely to result in a home win. The issues could be explained by either residual home/away impacts in the data, or an issue with my team rating system.</p> <p>Using this data we could now fit any number of machine learning classification models. For this model we use a <a href="https://en.wikipedia.org/wiki/Naive_Bayes_classifier" target="\_blank">naive Bayes classifier</a>, which gives the following probabilities for a home or away win, or a draw:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/euro2020/homeWin-480.webp 480w,/assets/img/euro2020/homeWin-800.webp 800w,/assets/img/euro2020/homeWin-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/euro2020/homeWin.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption style="text-align: center; margin-top: 8px;">Home win probabilities (note the change in colour scale for the draw plot)</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/euro2020/awayWin-480.webp 480w,/assets/img/euro2020/awayWin-800.webp 800w,/assets/img/euro2020/awayWin-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/euro2020/awayWin.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption style="text-align: center; margin-top: 8px;">Away win probabilities (note the change in colour scale for the draw plot)</figcaption> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/euro2020/draw-480.webp 480w,/assets/img/euro2020/draw-800.webp 800w,/assets/img/euro2020/draw-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/euro2020/draw.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption style="text-align: center; margin-top: 8px;">Draw probabilities (note the change in colour scale for the draw plot)</figcaption> </figure> </div> </div> <p>The above plots show how the probability of a given event changes as a function of the two teams rating. Combining all of these plots into one shows the decision ‘surfaces’, as the model transitions from ‘H’ to ‘D’ to ‘A’.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/euro2020/dSurface-480.webp 480w,/assets/img/euro2020/dSurface-800.webp 800w,/assets/img/euro2020/dSurface-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/euro2020/dSurface.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption style="text-align: center; margin-top: 8px;">Plot of decision surfaces for the Euro 2020 prediction model.</figcaption> </figure> </div> </div> <p>This model can then be used to predict the outcome of the European Championships. Simulating the entire tournament 20,000 times (this was made slightly difficult by the way [some] third-placed teams enter the knockout phase) gives rise to the following probabilities for tournament winners:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/euro2020/EC_plot_20000-480.webp 480w,/assets/img/euro2020/EC_plot_20000-800.webp 800w,/assets/img/euro2020/EC_plot_20000-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/euro2020/EC_plot_20000.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figcaption style="text-align: center; margin-top: 8px;">Probabilities of teams winning Euro 2020.</figcaption> </figure> </div> </div> <p>My model predicts that France is most likely to win Euro 2020 closely followed by Belgium. Unfortunately the model only ranks England as 7th most likely with odds of 6.6%.</p> <p>I have entered my model in the <a href="https://futbolmetrix.wordpress.com/2021/06/03/euro-2020-sophisticated-prediction-contest/" target="\_blank">Futbolmetrix sophisticated prediction contest</a>, so it will be interesting to see how that turns out.</p>]]></content><author><name></name></author><category term="mathematics"/><category term="football"/><summary type="html"><![CDATA[It’s football tournament time, which means it’s football tournament prediction time.]]></summary></entry><entry><title type="html">COVID-19 and Virtual Quizzes</title><link href="https://seanelvidge.github.io/blog/2020/COVID_19_and_virtual_quizzes/" rel="alternate" type="text/html" title="COVID-19 and Virtual Quizzes"/><published>2020-05-29T23:19:00+00:00</published><updated>2020-05-29T23:19:00+00:00</updated><id>https://seanelvidge.github.io/blog/2020/COVID_19_and_virtual_quizzes</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2020/COVID_19_and_virtual_quizzes/"><![CDATA[<p>It is pretty easy to tell what the UK has been upto during the coronavirus lockdown, virtual pub quizzes!</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/covid_quiz-480.webp 480w,/assets/img/covid_quiz-800.webp 800w,/assets/img/covid_quiz-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/covid_quiz.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </figure> </div> </div> <p>Obviously the scale of the two units, Google search hits (as a fraction of the most hits) and COVID-19 are very different. So I’ve taken a simple <a href="https://en.wikipedia.org/wiki/Z-transform" target="\_blank">Z-transform</a> to plot the data on the same scale. I’ve also taken the rolling 7-day average to see the overall trend.</p> <p>Clearly the most popular day to prepare your quiz is a Saturday!</p>]]></content><author><name></name></author><category term="mathematics"/><category term="internet"/><category term="misc"/><summary type="html"><![CDATA[It is pretty easy to tell what the UK has been upto during the coronavirus lockdown, virtual pub quizzes!]]></summary></entry><entry><title type="html">Pointless Scoring England Goalkeepers</title><link href="https://seanelvidge.github.io/blog/2019/Pointless_scoring_GKs/" rel="alternate" type="text/html" title="Pointless Scoring England Goalkeepers"/><published>2019-02-26T11:19:00+00:00</published><updated>2019-02-26T11:19:00+00:00</updated><id>https://seanelvidge.github.io/blog/2019/Pointless_scoring_GKs</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2019/Pointless_scoring_GKs/"><![CDATA[<p>The TV show “<a href="https://en.wikipedia.org/wiki/Pointless" target="\_blank">Pointless</a>” is based around correctly guessing obscure answers to questions. Season 5, Episode 48 had a question about England goalkeepers.</p> <p>Specifically the question was:</p> <blockquote> <p>We gave 100 people 100 seconds to name as many goalkeepers who have played for England men’s team as they could. (anyone who’s played in goal for England between 1966 and 2011 – no unused substitutes)</p> </blockquote> <p>Well this falls right into an area of something I am interested in, quizzes and football! The strategy seems obvious, the more caps a goalie received likely the more well known he would be and the more points you would score. So we want to find a player with as few caps as possible.</p> <p>Obviously I wanted to check the hypothesis.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/pointless_gk-480.webp 480w,/assets/img/pointless_gk-800.webp 800w,/assets/img/pointless_gk-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/pointless_gk.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </figure> </div> </div> <p>The theory holds – the fewer caps, the better the score in Pointless.</p> <p>There are two interesting players to mention. Robert Green – who for relatively few caps scores highly (<a href="https://www.youtube.com/watch?v=9AWLpjhwu0c" target="\_blank">it’s not hard to guess why</a>) and <a href="https://en.wikipedia.org/wiki/Ron_Springett" target="\_blank">Ron Springett</a> who played 33 games for England, and was even part of the 1966 World Cup winning squad, but seems fairly unknown.</p>]]></content><author><name></name></author><category term="mathematics"/><category term="football"/><summary type="html"><![CDATA[We gave 100 people 100 seconds to name as many goalkeepers who have played for England men's team as they could.]]></summary></entry><entry><title type="html">Penalty Shootouts are Stressful!</title><link href="https://seanelvidge.github.io/blog/2018/Penalty_shootouts_are_stressful/" rel="alternate" type="text/html" title="Penalty Shootouts are Stressful!"/><published>2018-07-04T22:47:00+00:00</published><updated>2018-07-04T22:47:00+00:00</updated><id>https://seanelvidge.github.io/blog/2018/Penalty_shootouts_are_stressful</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2018/Penalty_shootouts_are_stressful/"><![CDATA[<p>It is fair to say that during England’s (fantastic) World Cup win over Colombia <a href="https://www.bbc.co.uk/sport/football/44610244" target="\_blank">last night</a> I had my “heart in my mouth”. It was rather nerve-racking!</p> <p>Fortunately I was wearing my Fitbit and was able to download the timestamped data.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/football_HR-480.webp 480w,/assets/img/football_HR-800.webp 800w,/assets/img/football_HR-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/football_HR.jpeg" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </figure> </div> </div> <p>The celebration when Dier scored was epic.</p>]]></content><author><name></name></author><category term="football"/><summary type="html"><![CDATA[It is fair to say that during England’s (fantastic) World Cup win over Colombia last night I had my “heart in my mouth”. It was rather nerve-racking!]]></summary></entry><entry><title type="html">World Cup 2018 Predictions</title><link href="https://seanelvidge.github.io/blog/2018/World_Cup_2018_Predictions/" rel="alternate" type="text/html" title="World Cup 2018 Predictions"/><published>2018-06-14T15:10:00+00:00</published><updated>2018-06-14T15:10:00+00:00</updated><id>https://seanelvidge.github.io/blog/2018/World_Cup_2018_Predictions</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2018/World_Cup_2018_Predictions/"><![CDATA[<p>The World Cup is almost upon us and so it’s time to make some predictions…</p> <p>My model, like a lot of others, is based on the <a href="https://www.eloratings.net/" target="\_blank">World Football Elo ratings (WFER)</a>. Which is a system that uses the <a href="https://en.wikipedia.org/wiki/Elo_rating_system" target="\_blank">Elo rating system</a>. You can read all about Elo on those two links, but basically after every game a team gains or loses points. The change in points is dependent on the two rankings of the teams. If there is a large difference between the two teams and the lower ranking team wins then they would gain a lot more points than if the higher ranking team won (since it is expected that they should win).</p> <p>The rating system gives different weightings for the tournaments that games take place in. They rank them in the following order:</p> <ol> <li>World Cup finals,</li> <li>Continental championship finals and major intercontinental tournaments,</li> <li>World Cup and continental qualifiers and major tournaments,</li> <li>All other tournaments,</li> <li>Friendly matches.</li> </ol> <p>The WFER site takes into account all games that results could be found for (so goes all the way back to the first official International football game, between Scotland and England on 30 November 1872, 0-0).</p> <p>My model uses a combination of ensemble machine learning methods for classification problems, <a href="https://en.wikipedia.org/wiki/Random_forest" target="\_blank">random decision forests</a>. Each <a href="https://en.wikipedia.org/wiki/Decision_tree" target="\_blank">decision tree</a> in the ensemble is taken from a bootstrap sample of some training set where observations about an item (represented in the branches) can be used to drawn conclusions about the item’s target value (represented in the leaves). It is a standard technique which has a wide range of uses, including the evaluation of Wikipedia articles <a href="https://link.springer.com/chapter/10.1007%2F978-3-319-46254-7_50" target="\_blank">quality and importance</a>.</p> <p>The model uses the WFER data for training, where all friendly matches have been removed (because very often sides don’t play a full strength team in those matches). Different combinations of training data results in different resulting models. Specifically, giving the model the rankings between the two teams and the result of the match (win, draw, loss) gives different results than if you just give the two teams rankings, but only results from major tournaments. For the final results the model has been trained using 76 decision trees with three different datasets:</p> <ol> <li>All (non-friendly) fixtures,</li> <li>All (non-friendly) fixtures since 1980,</li> <li>Fixtures from the World Cup, European Championships, Africa Cup of Nations and Copa America.</li> </ol> <p>The final results are then an average of the output of each of the three trained models.</p> <p>To test the success of the model part of the data (15% in this case) is held back and then compared against. After training the model, the accuracy of the model predictions are compared to the held back data. In this case the model was shown to be 94.8% accurate in predicting a win, draw or loss.</p> <p>The World Cup can then be simulated running the model for each match. The model returns probabilities of each of the outcomes so the same results don’t happen each time. The simulations are ran 10,000 times in order to get success probabilities for each team:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/wc2018/WC_plot-480.webp 480w,/assets/img/wc2018/WC_plot-800.webp 800w,/assets/img/wc2018/WC_plot-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/wc2018/WC_plot.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>ou can see the model predicts that Brazil have by far the greatest chance of winning the World Cup, over twice as much as the next most likely team, Germany.</p> <p>As I mentioned earlier in the post, a lot of people are making predictions of the World Cup results. A selection of those by <a href="https://eightyfivepoints.blogspot.com/2018/05/what-can-we-expect-from-21st-fifa-world.html" target="\_blank">EightyFivePoints</a>, <a href="https://www.ubs.com/content/dam/assets/wm/global/cio/doc/investing-in-emerging-markets-en.pdf" target="\_blank">UBS</a>, Gracenotes and Bet365 are compared below:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/wc2018/WC_plot_comb_part-480.webp 480w,/assets/img/wc2018/WC_plot_comb_part-800.webp 800w,/assets/img/wc2018/WC_plot_comb_part-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/wc2018/WC_plot_comb_part.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>These models (apart from Bet365’s, which is more mysterious and in the above plot is found by taking the odds for each team from the Bet365 website) all use the Elo ranking system in someway (click on the links to find more about each one). Modelling theory would suggest that, without any further details and assuming each of the above models are “good”, the best model would be the combination of them:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/wc2018/WC_plot_up-480.webp 480w,/assets/img/wc2018/WC_plot_up-800.webp 800w,/assets/img/wc2018/WC_plot_up-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/wc2018/WC_plot_up.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <p>Which gives Brazil a 19.6% chance, followed by Germany (15.0%) and Spain (11.6%; although this doesn’t take into account that they sacked their manager 2 days before their first game of the tournament!).</p>]]></content><author><name></name></author><category term="mathematics"/><category term="football"/><summary type="html"><![CDATA[The World Cup is almost upon us and so it’s time to make some predictions…]]></summary></entry><entry><title type="html">Number of Days Between Easter’s</title><link href="https://seanelvidge.github.io/blog/2018/Num_Days_Between_Easter/" rel="alternate" type="text/html" title="Number of Days Between Easter’s"/><published>2018-04-17T14:51:00+00:00</published><updated>2018-04-17T14:51:00+00:00</updated><id>https://seanelvidge.github.io/blog/2018/Num_Days_Between_Easter</id><content type="html" xml:base="https://seanelvidge.github.io/blog/2018/Num_Days_Between_Easter/"><![CDATA[<p>My three year old asked me a pretty interesting question this morning, “how many sleeps is it until next Easter?”</p> <p>Okay, on the one hand the question is pretty straight forward. Easter this year (2018) was on April 1st, next year (2019) Easter falls on April 21st, so 385 days. But what is more interesting is what is the range and distribution of the possible number of days between consecutive Easter’s?</p> <p>I’ve previously <a href="https://seanelvidge.github.io/blog/2017/Distr_Pancake_Day/" target="\_blank">written about the distribution of pancake day/Shrove Tuesday</a>. In that article I discussed the (very) complicated way that Easter is calculated and provide a computus for finding Easter Sunday. Looping through the years 1 to 9999 (the extreme limits of <a href="https://docs.python.org/2/library/datetime.html" target="\_blank">Python’s datetime module</a>) we actually find that there are only 4 possible options for the number of days until next Easter: 350, 357, 378 and 385 days.</p> <p>Given that Easter can fall on any day between March 22nd and April 25th I think this is quite a surprising result. The four options are not evenly distributed:</p> <ul> <li>350 days – 24.5%</li> <li>357 days – 38.7%</li> <li>378 days – 5.1%</li> <li>386 days – 31.7%</li> </ul> <p>and we won’t have a 378 day Easter gap until 2021/22 and then 2048/49 after that.</p>]]></content><author><name></name></author><category term="mathematics"/><category term="code"/><summary type="html"><![CDATA[How many sleeps is it until next Easter?]]></summary></entry></feed>